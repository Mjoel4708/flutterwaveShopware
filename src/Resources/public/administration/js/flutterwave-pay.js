!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/bundles/administration/",r(r.s="iaOb")}({Vv8I:function(t){t.exports=JSON.parse('{"module":{"name":"PAY. transactions list","title":"PAY. transactions list","description":"PAY. transactions list","navigation":{"label":"PAY. transactions"}},"list":{"textTransactionOverview":"Blog entries","buttonAddBlogEntry":"Create new transaction entry","messageEmpty":"No transactions entries ...","table":{"title":"Title","active":"Active","transaction":"Transaction"}},"order":{"transaction":{"paid":"Paid (Capture)","cancelled":"Cancelled (Void)"}},"transactions-list":{"flutterwave_transaction_id":"Transaction ID","payment_id":"Payment ID","amount":"Amount","created_at":"Created at","updated_at":"Updated at","order_number":"Order number","customer":"Customer","status":"Transaction status","links":"Links"}}')},bhub:function(t){t.exports=JSON.parse("{}")},cN0g:function(t,e){Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:"flutterwave",key:"flutterwave_transactions",roles:{viewer:{privileges:["order:read","customer:read","state_machine_state:read","flutterwave_transactions:read"],dependencies:[]}}}),Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:"orders",key:"order",roles:{viewer:{privileges:["flutterwave_transactions:read"],dependencies:[]}}})},dEPB:function(t){t.exports=JSON.parse('{"module":{"name":"PAY. transactions list","title":"PAY. transactions list","description":"PAY. transactions list","navigation":{"label":"PAY. transactions"}},"list":{"textTransactionOverview":"Blog entries","buttonAddBlogEntry":"Create new transaction entry","messageEmpty":"No transactions entries ...","table":{"title":"Title","active":"Active","transaction":"Transaction"}},"order":{"transaction":{"paid":"Paid (Capture)","cancelled":"Cancelled (Void)"}},"transactions-list":{"flutterwave_transaction_id":"Transaction ID","payment_id":"Payment ID","amount":"Amount","created_at":"Created at","updated_at":"Updated at","order_number":"Order number","customer":"Customer","status":"Transaction status","links":"Links"}}')},iaOb:function(t,e,r){"use strict";r.r(e);r("cN0g");var n=r("uYBH"),a=r.n(n);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){s=function(t,e){return new c(t,void 0,e)};var r=l(RegExp),n=RegExp.prototype,a=new WeakMap;function c(t,e,n){var o=r.call(this,t,e);return a.set(o,n||a.get(t)),o}function u(t,e){var r=a.get(e);return Object.keys(r).reduce((function(e,n){return e[n]=t[r[n]],e}),Object.create(null))}return i(c,r),c.prototype.exec=function(t){var e=n.exec.call(this,t);return e&&(e.groups=u(e,this)),e},c.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var r=a.get(this);return n[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+r[e]})))}if("function"==typeof e){var s=this;return n[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!==o(t[t.length-1])&&t.push(u(t,s)),e.apply(this,t)}))}return n[Symbol.replace].call(this,t,e)},s.apply(this,arguments)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return c(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,t)})(t)}function c(t,e,r){return(c=u()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var a=new(Function.bind.apply(t,n));return r&&p(a,r.prototype),a}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=Shopware.Component,f=Shopware.Data.Criteria;m.register("flutterwave-transactions-list",{template:a.a,inject:["acl","repositoryFactory","stateStyleDataProviderService"],data:function(){return{repository:null,transactions:null,isUserCustomersViewer:this.isUserCustomersViewer(),isUserOrdersViewer:this.isUserOrdersViewer()}},metaInfo:function(){return{title:this.$createTitle()}},computed:{columns:function(){return[{property:"createdAt",dataIndex:"createdAt",label:this.$t("transactions-list.created_at"),sortIsAllowed:!0,allowResize:!0},{property:"updatedAt",dataIndex:"updatedAt",label:this.$t("transactions-list.updated_at"),sortIsAllowed:!0,allowResize:!0},{property:"flutterwaveTransactionId",dataIndex:"flutterwaveTransactionId",label:this.$t("transactions-list.flutterwave_transaction_id"),allowResize:!0,sortIsAllowed:!0,primary:!0},{property:"order.orderNumber",dataIndex:"orderNumber",label:this.$t("transactions-list.order_number"),sortIsAllowed:!1,allowResize:!0},{property:"amount",dataIndex:"amount",label:this.$t("transactions-list.amount"),allowResize:!0,sortIsAllowed:!0,primary:!0},{property:"customer.lastName",dataIndex:"customer",label:this.$t("transactions-list.customer"),allowResize:!0,sortIsAllowed:!1,primary:!0},{property:"status",dataIndex:"status",label:this.$t("transactions-list.status"),allowResize:!0,sortIsAllowed:!1,primary:!0},{property:"links",dataIndex:"links",label:this.$t("transactions-list.links"),allowResize:!0,sortIsAllowed:!1,align:"center"}]}},created:function(){var t=this;this.repository=this.repositoryFactory.create("flutterwave_payment");var e=new f;e.addAssociation("order"),e.addAssociation("customer"),e.addAssociation("stateMachineState"),e.addSorting(f.sort("flutterwave_payment.createdAt","DESC")),this.repository.search(e,Shopware.Context.api).then((function(e){t.transactions=e}))},methods:{getVariantFromPaymentState:function(t){return this.stateStyleDataProviderService.getStyle("order_transaction.state",t).variant},getData:function(t){if(t<=0)return"";var e=s(/([0-9]{4}).([0-9]{2}).([0-9]{2}).([0-9]{2}).([0-9]{2})/gm,{year:1,month:2,day:3,hours:4,minutes:5}).exec(t).groups;return e.year+"-"+e.month+"-"+e.day+" "+e.hours+":"+e.minutes},isUserCustomersViewer:function(){return this.acl.can("customer.viewer")},isUserOrdersViewer:function(){return this.acl.can("order.viewer")}}});var y=r("Vv8I"),v=r("dEPB");r("bhub");Shopware.Module.register("flutterwave-module",{type:"plugin",name:"flutterwave-module",title:"Flutterwave",description:"Flutterwave Payment module",icon:"default-object-address",color:"#00bcd4",version:"1.0.0",entity:"flutterwave-payment",snippets:{"de-DE":y,"en-GB":v,"nl-NL":nlNL},routes:{list:{component:"flutterwave-transactions-list",path:"list"}},navigation:[{path:"flutterwave.module.list",label:"Flutterwave Transactions",id:"flutterwave",parent:"sw-order",color:"#ff3d58",icon:"default-object-address",position:150}]})},uYBH:function(t,e){t.exports='{% block transaction_list %}\n\t<sw-page class="flutterwave-transaction-list">\n\t\t<template slot="smart-bar-header">\n\t\t\t<h2>\n\t\t\t\t{% block transaction_list_smart_bar_header_title_text %}\n\t\t\t\t\t{{ $tc(\'list.textBlogOverview\') }}\n\t\t\t\t{% endblock %}\n\t\t\t\t{% block transaction_list_smart_bar_header_amount %}\n\t\t\t\t\t<span v-if="!isLoading" class="sw-page__smart-bar-amount">\n\t\t\t\t\t\t({{ total }})\n\t\t\t\t\t</span>\n\t\t\t\t{% endblock %}\n\t\t\t</h2>\n\t\t</template>\n\t\t<template slot="content">\n\t\t\t{% block transaction_list_content %}\n\t\t\t\t<paynl-transactions-list v-if="transactions" :items="transactions" :repository="repository" :showactions="false" :showsettings="false" :showselection="false" :allowcolumnedit="false" :sortisallowed="true" :columns="columns">\n\n\t\t\t\t\t<template slot="column-links" slot-scope="{item}">\n\t\t\t\t\t\t<a target="_blank" class="sw-data-grid__cell-value" href="https://dashboard.flutterwave.com/">\n\t\t\t\t\t\t\t<sw-icon name="default-web-link" color="#1abc9c"></sw-icon>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<router-link v-if="isUserCustomersViewer" class="sw-data-grid__cell-value" :to="{ name: \'sw.customer.detail.base\', params: { id: item.customerId } }">\n\t\t\t\t\t\t\t<sw-icon name="default-avatar-single" color="#fc427b"></sw-icon>\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t<router-link v-if="isUserOrdersViewer" class="sw-data-grid__cell-value" :to="{ name: \'sw.order.detail.base\', params: { id: item.orderId }}">\n\t\t\t\t\t\t\t<sw-icon name="default-shopping-basket" color="#3498db"></sw-icon>\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<template slot="column-customer.lastName" slot-scope="{item}">\n\t\t\t\t\t\t{{ item.customer.lastName }}\n\t\t\t\t\t\t{{ item.customer.firstName }}\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<template slot="column-status" slot-scope="{ item }">\n\t\t\t\t\t\t<sw-label :variant="getVariantFromPaymentState(item.stateMachineState.technicalName)" appearance="pill">\n\t\t\t\t\t\t\t{{ item.stateMachineState.name }}\n\t\t\t\t\t\t</sw-label>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<template slot="column-updatedAt" slot-scope="{ item }">\n\t\t\t\t\t\t{{ getData(item.updatedAt) }}\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<template slot="column-createdAt" slot-scope="{ item }">\n\t\t\t\t\t\t{{ getData(item.createdAt) }}\n\t\t\t\t\t</template>\n\n\t\t\t\t</paynl-transactions-list>\n\t\t\t{% endblock %}\n\t\t</template>\n\t</sw-page>\n{% endblock %}\n'}});